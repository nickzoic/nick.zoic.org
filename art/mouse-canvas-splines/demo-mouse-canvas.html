<html>
    <head>
        <title>Mouse/Canvas Test</title>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="viewport" content="user-scalable=no, width=device-width"/>
        
        <style type="text/css">
            canvas { border: 1px dashed red;}
        </style>

        <script type="text/javascript">
         
            window.onload = function() {
                var canvas = document.getElementById("canvas");
                var context = canvas.getContext("2d");
                
                canvas.onmousedown = canvas.ontouchstart = function (e) {
                   
                    var ox = e.clientX || e.touches[0].pageX;
                    var oy = e.clientY || e.touches[0].pageY;

                    canvas.onmousemove = canvas.ontouchmove = function (e) {
                        e.preventDefault();
                        
                        var nx = e.clientX || e.touches[0].pageX;
                        var ny = e.clientY || e.touches[0].pageY;

                        context.beginPath();
                        context.moveTo(ox,oy); 
                        context.lineTo(nx,ny); 
                        context.stroke();
                        context.closePath();
                        ox = nx; oy = ny;
                    }
                    
                    canvas.onmouseup = canvas.onmouseout = canvas.ontouchend = function (e) {
			canvas.onmousemove = canvas.ontouchmove = null;
                    };
                    
                }
                
                
            };            
        </script>
    </head>
    <body>
        <canvas id="canvas" width="600" height="400"></canvas>
    </body>
</html>
